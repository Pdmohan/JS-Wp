/*
 $ @Author: 陌寒
 $ @Date: 2025-08-31 16:33:50
 $ @LastEditTime: 2025-10-15 20:56:10
 $ @Description: ZibBox 子主题，为 WordPress 添加灵动之美，让网页别具韵味！
 $ @Email: 7083266@qq.com
 $ @Remind: 有任何问题请联系主题作者,希望大家在使用的途中遵守我们的相关约定，也呼吁每一位子比正版用户，使用正版 拒绝盗版，如有盗版 也绝不售卖！
 $ @Copyright (c) 2025 by 郑州汇聚云网络科技有限公司, All Rights Reserved.
*/
var Snowflake = (function () { var flakes; var flakesTotal = 250; var wind = 0; var mouseX; var mouseY; function Snowflake(size, x, y, vx, vy) { this.size = size; this.x = x; this.y = y; this.vx = vx; this.vy = vy; this.hit = false; this.melt = false; this.div = document.createElement('div'); this.div.classList.add('snowflake'); this.div.style.width = this.size + 'px'; this.div.style.height = this.size + 'px' } Snowflake.prototype.move = function () { if (this.hit) { if (Math.random() > 0.995) this.melt = true } else { this.x += this.vx + Math.min(Math.max(wind, -10), 10); this.y += this.vy } if (this.x > window.innerWidth + this.size) { this.x -= window.innerWidth + this.size } if (this.x < -this.size) { this.x += window.innerWidth + this.size } if (this.y > window.innerHeight + this.size) { this.x = Math.random() * window.innerWidth; this.y -= window.innerHeight + this.size * 2; this.melt = false } var dx = mouseX - this.x; var dy = mouseY - this.y; this.hit = !this.melt && this.y < mouseY && dx * dx + dy * dy < 2400 }; Snowflake.prototype.draw = function () { this.div.style.transform = this.div.style.MozTransform = this.div.style.webkitTransform = 'translate3d(' + this.x + 'px,' + this.y + 'px,0)' }; function update() { for (var i = flakes.length; i--;) { var flake = flakes[i]; flake.move(); flake.draw() } requestAnimationFrame(update) } Snowflake.init = function (container) { flakes = []; for (var i = flakesTotal; i--;) { var size = (Math.random() + 0.2) * 12 + 1; var flake = new Snowflake(size, Math.random() * window.innerWidth, Math.random() * window.innerHeight, Math.random() - 0.5, size * 0.3); container.appendChild(flake.div); flakes.push(flake) } container.onmousemove = function (event) { mouseX = event.clientX; mouseY = event.clientY; wind = (mouseX - window.innerWidth / 2) / window.innerWidth * 6 }; container.ontouchstart = function (event) { mouseX = event.targetTouches[0].clientX; mouseY = event.targetTouches[0].clientY; event.preventDefault() }; window.ondeviceorientation = function (event) { if (event) { wind = event.gamma / 10 } }; update() }; return Snowflake }()); window.onload = function () { setTimeout(function () { Snowflake.init(document.getElementById('falling-snow')) }, 500) }