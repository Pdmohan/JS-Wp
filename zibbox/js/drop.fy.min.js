/*
 $ @Author: 陌寒
 $ @Date: 2025-08-31 16:43:42
 $ @LastEditTime: 2025-08-31 16:43:56
 $ @Description: ZibBox 子主题，为 WordPress 添加灵动之美，让网页别具韵味！
 $ @Email: 7083266@qq.com
 $ @Remind: 有任何问题请联系主题作者,希望大家在使用的途中遵守我们的相关约定，也呼吁每一位子比正版用户，使用正版 拒绝盗版，如有盗版 也绝不售卖！
 $ @Copyright (c) 2025 by 郑州汇聚云网络科技有限公司, All Rights Reserved.
*/


function Sakura(t, n, e, i, a) { this.x = t, this.y = n, this.s = e, this.r = i, this.fn = a } function getRandom(t) { var n, e; switch (t) { case "x": n = Math.random() * window.innerWidth; break; case "y": n = Math.random() * window.innerHeight; break; case "s": n = Math.random(); break; case "r": n = 4 * Math.random(); break; case "fnx": e = 1 * Math.random() - .5, n = function (t, n) { return t + .5 * e - 1.7 }; break; case "fny": e = 1.5 + .7 * Math.random(), n = function (t, n) { return n + e }; break; case "fnr": e = .03 * Math.random(), n = function (t) { return t + e } }return n } function startSakura() { requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame; var t, n = document.createElement("canvas"); staticx = !0, n.height = window.innerHeight, n.width = window.innerWidth, n.setAttribute("style", "position: fixed;left: 0;top: 0;pointer-events: none;"), n.setAttribute("id", "canvas_sakura"), document.getElementsByTagName("body")[0].appendChild(n), t = n.getContext("2d"); for (var e = new SakuraList, i = 0; i < 50; i++) { var a, s, r, o, h, d, m; s = getRandom("x"), r = getRandom("y"), h = getRandom("r"), o = getRandom("s"), d = getRandom("fnx"), m = getRandom("fny"), randomFnR = getRandom("fnr"), a = new Sakura(s, r, o, h, { x: d, y: m, r: randomFnR }), a.draw(t), e.push(a) } stop = requestAnimationFrame(function () { t.clearRect(0, 0, n.width, n.height), e.update(), e.draw(t), stop = requestAnimationFrame(arguments.callee) }) } function stopp() { if (staticx) { var t = document.getElementById("canvas_sakura"); t.parentNode.removeChild(t), window.cancelAnimationFrame(stop), staticx = !1 } else startSakura() } var stop, staticx, img = new Image; img.src = "/wp-content/themes/ZibBox/assets/images/dropdown/fengye.webp", Sakura.prototype.draw = function (t) { t.save(); this.s; t.translate(this.x, this.y), t.rotate(this.r), t.drawImage(img, 0, 0, 20 * this.s, 20 * this.s), t.restore() }, Sakura.prototype.update = function () { this.x = this.fn.x(this.x, this.y), this.y = this.fn.y(this.y, this.y), this.r = this.fn.r(this.r), (this.x > window.innerWidth || this.x < 0 || this.y > window.innerHeight || this.y < 0) && (this.r = getRandom("fnr"), Math.random() > .4 ? (this.x = getRandom("x"), this.y = 0, this.s = getRandom("s"), this.r = getRandom("r")) : (this.x = window.innerWidth, this.y = getRandom("y"), this.s = getRandom("s"), this.r = getRandom("r"))) }, SakuraList = function () { this.list = [] }, SakuraList.prototype.push = function (t) { this.list.push(t) }, SakuraList.prototype.update = function () { for (var t = 0, n = this.list.length; t < n; t++)this.list[t].update() }, SakuraList.prototype.draw = function (t) { for (var n = 0, e = this.list.length; n < e; n++)this.list[n].draw(t) }, SakuraList.prototype.get = function (t) { return this.list[t] }, SakuraList.prototype.size = function () { return this.list.length }, window.onresize = function () { document.getElementById("canvas_snow") }, img.onload = function () { startSakura() };